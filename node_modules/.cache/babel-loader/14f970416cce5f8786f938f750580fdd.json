{"ast":null,"code":"import _classCallCheck from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Searchbar from '../components/search-bar';\nimport VideoList from '../containers/video-list';\nimport VideoDetail from '../components/video-detail';\nimport Video from '../components/video';\nvar API_END_POINT = \"https://api.themoviedb.org/3/movie/popular?page=1&api_key=\";\nvar API_KEY = \"api_key=f1be4bafe6f7cb0cb84f5948c5b75497\";\nvar SEARCH_URL = \"search/movie?language=fr&include_adult=false\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      movieList: [],\n      currentMovie: {}\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.initMovies();\n    }\n  }, {\n    key: \"initMovies\",\n    value: function initMovies() {\n      axios.get(\"\".concat(API_END_POINT).concat(POPULAR_MOVIES_URL, \"&\").concat(API_KEY)).then(function (response) {\n        this.setState({\n          movieList: response.data.results.slice(1, 6),\n          currentMovie: response.data.results[0]\n        }, function () {\n          this.applyVideoToCurrentMovie();\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"applyVideoToCurrentMovie\",\n    value: function applyVideoToCurrentMovie() {\n      axios.get(\"\".concat(API_END_POINT, \"movie/\").concat(this.state.currentMovie.id, \"?append_to_response=videos&include_adult=false&\").concat(API_KEY)).then(function (response) {\n        var youtubeKey = response.data.videos.results[0].key;\n        var newCurrentMovieState = this.state.currentMovie;\n        newCurrentMovieState.videoId = youtubeKey;\n        this.setState({\n          currentMovie: newCurrentMovieState\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"onClickListItem\",\n    value: function onClickListItem(movie) {\n      this.setState({\n        currentMovie: movie\n      }, function () {\n        this.applyVideoToCurrentMovie();\n        this.setRecommandation();\n      });\n    }\n  }, {\n    key: \"setRecommandation\",\n    value: function setRecommandation() {\n      axios.get(\"\".concat(API_END_POINT, \"movie/\").concat(this.state.currentMovie.id, \"/recommendations?&\").concat(API_KEY, \"&language=fr\")).then(function (response) {\n        this.setState({\n          movieList: response.data.results.slice(0, 5)\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"onClickSearch\",\n    value: function onClickSearch(searchText) {\n      if (searchText) {\n        axios.get(\"\".concat(API_END_POINT).concat(SEARCH_URL, \"&\").concat(API_KEY, \"&query=\").concat(searchText)).then(function (response) {\n          var _this2 = this;\n\n          if (response.data && response.data.results[0]) {\n            if (response.data.results[0].id != this.state.currentMovie.id) {\n              this.setState({\n                currentMovie: response.data.results[0]\n              }, function () {\n                _this2.applyVideoToCurrentMovie();\n\n                _this2.setRecommandation();\n              });\n            }\n          }\n        }.bind(this));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var renderVideoList = function renderVideoList() {\n        if (_this3.state.movieList.length >= 5) {\n          return React.createElement(VideoList, {\n            movieList: _this3.state.movieList,\n            callback: _this3.onClickListItem.bind(_this3),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          });\n        }\n      };\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Searchbar, {\n        callback: this.onClickSearch.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Video, {\n        videoId: this.state.currentMovie.videoId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(VideoDetail, {\n        title: this.state.currentMovie.title,\n        description: this.state.currentMovie.overview,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, renderVideoList())));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/src/App.js"],"names":["React","Component","axios","Searchbar","VideoList","VideoDetail","Video","API_END_POINT","API_KEY","SEARCH_URL","App","props","state","movieList","currentMovie","initMovies","get","POPULAR_MOVIES_URL","then","response","setState","data","results","slice","applyVideoToCurrentMovie","bind","id","youtubeKey","videos","key","newCurrentMovieState","videoId","movie","setRecommandation","searchText","renderVideoList","length","onClickListItem","onClickSearch","title","overview"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport axios from 'axios'\nimport Searchbar from '../components/search-bar'\nimport VideoList from '../containers/video-list'\nimport VideoDetail from '../components/video-detail'\nimport Video from '../components/video'\n\nconst API_END_POINT = \"https://api.themoviedb.org/3/movie/popular?page=1&api_key=\"\nconst API_KEY = \"api_key=f1be4bafe6f7cb0cb84f5948c5b75497\"\nconst SEARCH_URL = \"search/movie?language=fr&include_adult=false\"\n\nclass App extends Component { \n    constructor(props) {\n        super(props)\n        this.state = {movieList:[], currentMovie:{}}\n    }\n\n    componentWillMount(){\n        this.initMovies();\n    }\n\n    initMovies() {\n        axios.get(`${API_END_POINT}${POPULAR_MOVIES_URL}&${API_KEY}`).then(function(response){\n            this.setState({movieList:response.data.results.slice(1,6), currentMovie:response.data.results[0]}, function () {\n                this.applyVideoToCurrentMovie();\n            });\n        }.bind(this));\n    }\n\n    applyVideoToCurrentMovie() {\n        axios.get(`${API_END_POINT}movie/${this.state.currentMovie.id}?append_to_response=videos&include_adult=false&${API_KEY}`)\n        .then(function(response){\n            const youtubeKey = response.data.videos.results[0].key\n            let newCurrentMovieState = this.state.currentMovie\n            newCurrentMovieState.videoId = youtubeKey\n            this.setState({currentMovie : newCurrentMovieState})\n        }.bind(this));\n    }\n\n    onClickListItem(movie) {\n        this.setState({currentMovie:movie}, function () {\n            this.applyVideoToCurrentMovie();\n            this.setRecommandation();\n        })\n    }\n\n    setRecommandation(){\n        axios.get(`${API_END_POINT}movie/${this.state.currentMovie.id}/recommendations?&${API_KEY}&language=fr`).then(function(response){\n            this.setState({movieList:response.data.results.slice(0,5)});\n        }.bind(this));\n    }\n\n    onClickSearch(searchText){\n        if(searchText){ \n            axios.get(`${API_END_POINT}${SEARCH_URL}&${API_KEY}&query=${searchText}`).then(function(response){\n                if(response.data && response.data.results[0]){\n                    if(response.data.results[0].id != this.state.currentMovie.id){\n                        this.setState({currentMovie: response.data.results[0]},() => {\n                            this.applyVideoToCurrentMovie();\n                            this.setRecommandation();\n                        })\n                    }\n                }\n            }.bind(this)); \n        }\n    }\n\n    render() {\n        const renderVideoList = () => {\n            if(this.state.movieList.length>=5){\n                return <VideoList movieList={this.state.movieList} callback={this.onClickListItem.bind(this)}/>\n            }\n        }\n\n        return (\n            <div>\n                <div className=\"search_bar\">\n                    <Searchbar callback={this.onClickSearch.bind(this)}/>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-md-8\">\n                        <Video videoId={this.state.currentMovie.videoId}/>\n                        <VideoDetail title={this.state.currentMovie.title} description={this.state.currentMovie.overview}/>\n                    </div>\n                    <div className=\"col-md-4\">\n                        {renderVideoList()}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}