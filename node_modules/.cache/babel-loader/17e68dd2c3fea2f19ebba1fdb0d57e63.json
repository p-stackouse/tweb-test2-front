{"ast":null,"code":"import _classCallCheck from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Searchbar from './components/search-bar';\nimport VideoList from './containers/video-list';\nimport VideoDetail from './components/video-detail';\nimport Video from './components/video';\nvar API_END_POINT = \"https://api.themoviedb.org/3/movie/popular?page=1&api_key=\";\nvar API_KEY = \"f1be4bafe6f7cb0cb84f5948c5b75497\";\nvar SEARCH_URL = \"search/movie?language=fr&include_adult=false\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      movieList: [],\n      currentMovie: {}\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.initMovies();\n    }\n  }, {\n    key: \"initMovies\",\n    value: function initMovies() {\n      axios.get(\"\".concat(API_END_POINT, \"&\").concat(API_KEY)).then(function (response) {\n        this.setState({\n          movieList: response.data.results.slice(1, 6),\n          currentMovie: response.data.results[0]\n        }, function () {\n          this.applyVideoToCurrentMovie();\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"applyVideoToCurrentMovie\",\n    value: function applyVideoToCurrentMovie() {\n      axios.get(\"\".concat(API_END_POINT, \"movie/\").concat(this.state.currentMovie.id, \"?append_to_response=videos&include_adult=false&\").concat(API_KEY)).then(function (response) {\n        var youtubeKey = response.data.videos.results[0].key;\n        var newCurrentMovieState = this.state.currentMovie;\n        newCurrentMovieState.videoId = youtubeKey;\n        this.setState({\n          currentMovie: newCurrentMovieState\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"onClickListItem\",\n    value: function onClickListItem(movie) {\n      this.setState({\n        currentMovie: movie\n      }, function () {\n        this.applyVideoToCurrentMovie();\n        this.setRecommandation();\n      });\n    }\n  }, {\n    key: \"setRecommandation\",\n    value: function setRecommandation() {\n      axios.get(\"\".concat(API_END_POINT, \"movie/\").concat(this.state.currentMovie.id, \"/recommendations?&\").concat(API_KEY, \"&language=fr\")).then(function (response) {\n        this.setState({\n          movieList: response.data.results.slice(0, 5)\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"onClickSearch\",\n    value: function onClickSearch(searchText) {\n      if (searchText) {\n        axios.get(\"\".concat(API_END_POINT).concat(SEARCH_URL, \"&\").concat(API_KEY, \"&query=\").concat(searchText)).then(function (response) {\n          var _this2 = this;\n\n          if (response.data && response.data.results[0]) {\n            if (response.data.results[0].id != this.state.currentMovie.id) {\n              this.setState({\n                currentMovie: response.data.results[0]\n              }, function () {\n                _this2.applyVideoToCurrentMovie();\n\n                _this2.setRecommandation();\n              });\n            }\n          }\n        }.bind(this));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Hello world\");\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/patrickneto/CloudStation/Heig-VD/TWEB/Test2/tweb-test2-front/te2-front/src/App.js"],"names":["React","Component","axios","Searchbar","VideoList","VideoDetail","Video","API_END_POINT","API_KEY","SEARCH_URL","App","props","state","movieList","currentMovie","initMovies","get","then","response","setState","data","results","slice","applyVideoToCurrentMovie","bind","id","youtubeKey","videos","key","newCurrentMovieState","videoId","movie","setRecommandation","searchText"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport axios from 'axios'\nimport Searchbar from './components/search-bar'\nimport VideoList from './containers/video-list'\nimport VideoDetail from './components/video-detail'\nimport Video from './components/video'\n\nconst API_END_POINT = \"https://api.themoviedb.org/3/movie/popular?page=1&api_key=\"\nconst API_KEY = \"f1be4bafe6f7cb0cb84f5948c5b75497\"\nconst SEARCH_URL = \"search/movie?language=fr&include_adult=false\"\n\nclass App extends Component { \n    constructor(props) {\n        super(props)\n        this.state = {movieList:[], currentMovie:{}}\n    }\n\n    componentWillMount(){\n        this.initMovies();\n    }\n\n    initMovies() {\n        axios.get(`${API_END_POINT}&${API_KEY}`).then(function(response){\n            this.setState({movieList:response.data.results.slice(1,6), currentMovie:response.data.results[0]}, function () {\n                this.applyVideoToCurrentMovie();\n            });\n        }.bind(this));\n    }\n\n    applyVideoToCurrentMovie() {\n        axios.get(`${API_END_POINT}movie/${this.state.currentMovie.id}?append_to_response=videos&include_adult=false&${API_KEY}`)\n        .then(function(response){\n            const youtubeKey = response.data.videos.results[0].key\n            let newCurrentMovieState = this.state.currentMovie\n            newCurrentMovieState.videoId = youtubeKey\n            this.setState({currentMovie : newCurrentMovieState})\n        }.bind(this));\n    }\n\n    onClickListItem(movie) {\n        this.setState({currentMovie:movie}, function () {\n            this.applyVideoToCurrentMovie();\n            this.setRecommandation();\n        })\n    }\n\n    setRecommandation(){\n        axios.get(`${API_END_POINT}movie/${this.state.currentMovie.id}/recommendations?&${API_KEY}&language=fr`).then(function(response){\n            this.setState({movieList:response.data.results.slice(0,5)});\n        }.bind(this));\n    }\n\n    onClickSearch(searchText){\n        if(searchText){ \n            axios.get(`${API_END_POINT}${SEARCH_URL}&${API_KEY}&query=${searchText}`).then(function(response){\n                if(response.data && response.data.results[0]){\n                    if(response.data.results[0].id != this.state.currentMovie.id){\n                        this.setState({currentMovie: response.data.results[0]},() => {\n                            this.applyVideoToCurrentMovie();\n                            this.setRecommandation();\n                        })\n                    }\n                }\n            }.bind(this)); \n        }\n    }\n\n    render() {\n        return (\n            <div>\n                Hello world\n            </div>\n        )\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}